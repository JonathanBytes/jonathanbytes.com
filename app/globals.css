@import "tailwindcss";
@import "./css/theme-colors.css";
@import "./css/themes.css";
@import "./css/prism-classes.css";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --font-mono: var(--font-ibm);
  --font-sans: var(--font-montserrat);
  --font-serif: var(--font-yeseva-one);

  --color-foreground: rgb(from var(--color-foreground) r g b);
  --color-background: rgb(from var(--color-background) r g b);
  --color-primary: rgb(from var(--color-primary) r g b);
  --color-secondary: rgb(from var(--color-secondary) r g b);
  --color-accent: rgb(from var(--color-accent) r g b);
  --color-altbg: rgb(from var(--color-altbg) r g b);
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/

@layer base {
  :root {
    --animation-duration: 200ms;
    /* Pill colors - global scope */
    --black: #282828;
    --red: #fb4934;
    --altred: #cc241d;
    --yellow: #fabd2f;
    --altyellow: #d79921;
    --blue: #83a598;
    --altblue: #458588;
    --green: #b8bb26;
    --altgreen: #98971a;
    --aqua: #8ec07c;
    --altaqua: #689d6a;
    --orange: #fe8019;
    --altorange: #d65d0e;
    --white: #fff;
    --white2: #f9f5d7;
    --white3: #fbf1c7;
    --white4: #d5c4a1;
    --purple: #d3869b;
    --altpurple: #b16286;
    --gray: #928374;
    --gray2: #7c6f64;
  }

  html {
    /* Correct colors to unstyled elements */
    color-scheme: dark light;
  }

  [data-theme="dark"] {
    color-scheme: dark;
  }

  [data-theme="light"] {
    color-scheme: light;
  }

  body {
    transition-property:
      color, background-color, border-color, text-decoration-color, fill, stroke;
    transition-duration: 500ms;
  }

  img {
    max-width: 100%;
    width: auto;
    height: auto;
  }

  /* Inline code (not in code blocks) */
  :not(pre) > code:not([class*="language-"]) {
    padding: 0.25rem 0.75rem;
    margin: 0 0.125rem;
    border-radius: 9999px;
    font-family: var(--font-ibm);
    font-size: 0.875rem;
    background-color: var(--color-altbg);
    color: var(--color-foreground);
  }

  /* Basic styling for all pre elements (including Prism) */
  pre {
    margin: auto;
    width: 85%;
    max-width: 45rem;
    box-shadow:
      0 4px 6px -1px rgb(0 0 0 / 0.1),
      0 2px 4px -2px rgb(0 0 0 / 0.1);
    border-radius: 0.5rem;
    margin-bottom: 1.5rem;
    font-family: var(--font-ibm);
    overflow-x: auto;
  }

  /* Background for non-Prism code blocks only */
  pre:not([class*="language-"]) {
    background-color: var(--color-altbg);
    color: var(--color-foreground);
    padding: 1rem;
  }

  table {
    margin-left: auto;
    margin-right: auto;
    width: 75%;
    font-size: 0.875rem;
    text-align: left;
    direction: ltr;
    color: var(--color-foreground);
  }

  thead {
    font-size: 0.75rem;
    color: var(--color-accent);
    text-transform: uppercase;
    background-color: var(--color-altbg);
  }

  tr {
    background-color: var(--color-altbg);
    border-bottom-width: 1px;
  }

  @media (prefers-color-scheme: dark) {
    tr {
      border-color: rgb(64 64 64);
    }
  }

  th {
    padding: 1rem 1.5rem;
    font-weight: 500;
    color: var(--color-accent);
    white-space: nowrap;
  }

  td {
    padding: 1rem 1.5rem;
  }

  blockquote {
    font-size: 0.875rem;
    opacity: 0.5;
    font-style: italic;
    position: relative;
    color: var(--color-foreground);
    display: inline-flex;
    margin: 0.5rem 0;
    margin-left: 0.5rem;
  }

  blockquote p {
    margin: 0;
    text-align: left;
  }

  blockquote::before {
    content: "";
    display: block;
    position: absolute;
    top: 0;
    left: -0.5rem;
    width: 0.125rem;
    height: 100%;
    background-color: var(--color-foreground);
    border-radius: 0.25rem;
  }

  ol {
    list-style-position: inside;
    list-style-type: decimal;
  }

  article ul {
    list-style-type: none;
    padding-bottom: 0.25rem;
    opacity: 0.9;
  }

  article ul ul {
    padding-left: 1.5rem;
  }

  article a {
    color: var(--color-primary);
  }

  /* Estilo para los títulos */
  main h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    text-align: center;
    font-family: var(--font-montserrat);
    font-weight: 500;
    margin: 1rem 0;
  }

  main h1 {
    font-family: var(--font-yeseva-one);
    font-size: 3rem;
    margin: 2rem 0;
    word-wrap: break-word;
  }

  article h1 {
    font-size: 2.25rem;
  }

  @media (min-width: 640px) {
    article h1 {
      font-size: 3rem;
    }
  }

  article h2 {
    text-align: left;
    font-family: var(--font-yeseva-one);
    font-size: 1.875rem;
  }

  article h3,
  article h4,
  article h5,
  article h6 {
    text-align: left;
  }

  article h3::after,
  article h4::after,
  article h5::after,
  article h6::after {
    content: ": ";
  }

  article h3 {
    font-size: 1.5rem;
  }

  article h4 {
    font-size: 1.25rem;
  }

  article a {
    font-family: var(--font-montserrat);
    color: var(--color-primary);
    font-weight: 700;
  }

  article a::after {
    content: " ↗";
  }

  article h2 a::after,
  article h3 a::after,
  article h4 a::after,
  article h5 a::after,
  article h6 a::after {
    content: "# ";
    font-weight: 400;
  }

  [id^="user-content"] a::after {
    content: "";
  }

  #pill a {
    color: var(--color-background);
    font-weight: 400;
  }

  #pill a::after {
    content: "";
  }

  main {
    width: 100%;
    max-width: 72rem;
    padding: 1rem 5vw;
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
  }

  article {
    width: 100%;
  }

  main p {
    font-size: 1.125rem;
    width: 100%;
    max-width: 50rem;
    margin: 0.5rem 0;
  }

  a {
    color: var(--color-foreground);
    text-decoration-color: transparent;
    transition-property: opacity;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }

  a:hover {
    opacity: 0.8;
  }

  button {
    font-family: var(--font-ibm);
  }

  /* Desktop dropdown - overlay, doesn't affect layout */
  #dropdown.desktop-dropdown {
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition:
      opacity 0.3s ease,
      visibility 0.3s ease,
      transform 0.3s ease;
  }

  #dropdownTrigger:hover #dropdown.desktop-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  /* Mobile dropdown - affects layout when visible with enter/exit animations */
  #dropdown.mobile-dropdown {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transform: translateY(-10px);
    transition:
      max-height 0.3s ease,
      opacity 0.3s ease,
      transform 0.3s ease;
  }

  #dropdownTrigger:hover #dropdown.mobile-dropdown {
    max-height: 200px;
    /* Adjust based on your content height */
    opacity: 1;
    transform: translateY(0);
  }

  .hamburger-menu-btn {
    --button-color: var(--color-foreground);
  }

  .hamburger-menu-btn .hamburger {
    transition:
      translate 0.25s,
      rotate 0.5s;
  }

  .hamburger-menu-btn[aria-expanded="true"] .hamburger {
    translate: 2px -2px;
    rotate: 0.125turn;
  }

  .hamburger-menu-btn .line {
    transition: 0.3s;
    stroke-dasharray: 60 31 60 300;
  }

  .hamburger-menu-btn[aria-expanded="true"] .line {
    stroke-dasharray: 60 105 60 300;
    stroke-dashoffset: -90;
  }

  /* Hero Styles */
  .hero {
    width: 100%;
    max-width: 1100px;
    display: grid;
    grid-template-columns: 2fr 1fr;
    align-items: center;
    justify-items: stretch;
    margin: auto auto 4rem auto;
    padding-top: 1rem;
  }

  .variation {
    display: flex;
    align-content: center;
    justify-content: center;
    color: var(--white);
    background-image: url(/assets/interior.webp);
    object-fit: cover;
    background-size: cover;
    height: 60vh;
    background-position: center;
    max-width: none;
    padding-top: 0;
  }

  .variation p {
    text-align: center;
    margin: 0;
    font-size: 2rem;
  }

  .variant {
    margin: 0;
    padding: 0;
  }

  .person img {
    width: 100%;
  }

  .person {
    transition: transform 800ms cubic-bezier(0.075, 0.82, 0.165, 1);
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .person-container {
    width: 85%;
    aspect-ratio: 1 / 1.45;
    position: relative;
    overflow: hidden;
    border-radius: 0 0 100vw 100vw;
  }

  .person-img {
    position: absolute;
    width: 60%;
    bottom: -70px;
    z-index: 2;
    transition: transform 500ms cubic-bezier(0.075, 0.82, 0.165, 1);
  }

  .person-circle {
    rotate: -30deg;
    opacity: 90%;
    position: absolute;
    aspect-ratio: 1;
    bottom: 0;
    object-fit: cover;
    border-radius: 50%;
  }

  .person-img:hover {
    transform: scale(1.06) translateY(-1.5vw);
  }

  .person:hover {
    transform: scale(1.02);
  }

  @media only screen and (max-width: 820px) {
    .hero {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      flex-wrap: wrap;
    }

    .variation {
      height: 40vh;
    }

    .variant {
      margin: 0;
    }
  }

  .rehype-code-title {
    margin-left: 11%;
    margin-top: 1rem;
    width: fit-content;
    padding: 0.25rem 0.5rem;
    background-color: var(--color-altbg);
    font-family: var(--font-ibm);
    font-size: 0.875rem;
    color: var(--color-foreground);
    font-weight: 600;
    border-radius: 0.5rem 0.5rem 0 0;
  }

  @media (min-width: 640px) {
    .rehype-code-title {
      margin-left: 12%;
    }
  }

  @media (min-width: 1024px) {
    .rehype-code-title {
      margin-left: 16%;
    }
  }
}

@utility underlined {
  position: relative;

  &::before {
    content: "";
    position: absolute;
    width: 100%;
    height: 0.125rem;
    background-color: var(--color-primary);
    visibility: hidden;
    transition: transform 300ms;
    border-radius: 0.375rem;
    transform: scaleX(0);
    left: 0;
    bottom: -0.25rem;
  }

  &:hover::before {
    visibility: visible;
    transform: scaleX(1);
  }
}

@utility sideline {
  transition: padding 500ms;

  &:hover {
    border-left-color: var(--color-primary);
    transition: padding 300ms;
    padding-left: 0.625rem;
    border-left-width: 3px;
    border-left-style: solid;
  }
}

@utility btn {
  font-family: var(--font-ibm);
  background-color: var(--color-foreground);
  color: var(--color-background);
  padding: 0.25rem 1rem;
  border-radius: 0.5rem;
  transition:
    color var(--animation-duration) ease-in-out,
    background-color var(--animation-duration) ease-in-out;

  &:hover {
    background-color: var(--color-primary);
  }
}

@utility mobile-nav {
  /* Mobile Navigation Animation with improved height handling */
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  /* Explicitly set bottom to 0 */
  width: 100%;
  /* Full width on small screens */
  max-width: fit-content;
  /* Limit width on larger screens */
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transform: translateX(100%);
  overflow-y: auto;
  /* Allow scrolling if content is too tall */

  &[data-visible="true"] {
    transform: translateX(0) !important;
  }
}
